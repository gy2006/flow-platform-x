name: git-clone
version: 0.0.1
inputs:
- name: FLOWCI_GIT_URL
  type: string
  required: true
- name: FLOWCI_GIT_BRANCH
  type: string
  required: true
- name: FLOWCI_RSA_PRIVATE_KEY
  type: string
  required: true
script: |
  PK_FILE=${FLOWCI_PLUGIN_WORKSPACE}/FLOWCI_RSA_PRIVATE_KEY
  chmod 400 ${PK_FILE}
  ssh-agent bash -c 'ssh-add ${PK_FILE}; git clone -b ${FLOWCI_GIT_BRANCH} ${FLOWCI_GIT_URL}'